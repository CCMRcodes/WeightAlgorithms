% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Goodrich2016.R
\name{big_change_outliers}
\alias{big_change_outliers}
\title{Flag Outliers Within Group}
\usage{
big_change_outliers(df, id, measures, tmeasures, wtchng_thresh = 100)
}
\arguments{
\item{df}{object of class \code{data.frame}, containing \code{id} and
\code{measures}}

\item{id}{string corresponding to the name of the column of patient
identifiers in \code{df}.}

\item{measures}{string corresponding to the name of the column of measures in
\code{df}, e.g., numeric weight data if using to clean weight data.}

\item{tmeasures}{string corresponding to the name of the column of measure
dates and/or times in \code{df}}

\item{wtchng_thresh}{numeric scalar used as a cutoff for higher than (or
lower than) expected weight changes from one time point j to time point
j + 1, by person or group. Default is 100.}
}
\value{
data frame with outliers set to \code{NA} if measurements fall
  outside the range of \code{wtchng_thresh}. Output column designated
  \code{measout}.
}
\description{
\code{big_change_outliers} takes a grouped time-series as a data frame and
identifies outlier measurements if greater than some threshold chosen by the
user. This threshold is used as a cutoff for higher than (or lower than)
expected changes in measurements from one time point j to time point j + 1,
by person or group.
}
\examples{
library(dplyr)
data(cdw1000)

cdw1000_100 <- big_change_outliers(
  df = cdw1000,
  id = "id",
  measures = "Weight",
  tmeasures = "WeightDate"
)

# reduce threshold
cdw1000_50 <- big_change_outliers(
  df = cdw1000,
  id = "id",
  measures = "Weight",
  tmeasures = "WeightDate",
  wtchng_thresh = 50
)

bind_rows(`100` = cdw1000_100, `50` = cdw1000_50, .id = "Threshold") \%>\%
  select(Threshold, measout) \%>\%
  na.omit() \%>\%
  group_by(Threshold) \%>\%
  summarize(n = n(), mean = mean(measout), sd = sd(measout))
}
